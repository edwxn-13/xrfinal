(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))f(t);new MutationObserver(t=>{for(const n of t)if(n.type==="childList")for(const s of n.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&f(s)}).observe(document,{childList:!0,subtree:!0});function u(t){const n={};return t.integrity&&(n.integrity=t.integrity),t.referrerPolicy&&(n.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?n.credentials="include":t.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function f(t){if(t.ep)return;t.ep=!0;const n=u(t);fetch(t.href,n)}})();const b=document.getElementById("renderCanvas"),g=new BABYLON.Engine(b,!0),w=async function(){const d="Hello AR World",e=new BABYLON.Scene(g),u=new BABYLON.FreeCamera("camera1",new BABYLON.Vector3(0,1,-5),e);u.setTarget(BABYLON.Vector3.Zero()),u.attachControl(b,!0);const f=new BABYLON.HemisphericLight("light",new BABYLON.Vector3(0,1,0),e);f.intensity=1;const t=new BABYLON.DirectionalLight("dirlight",new BABYLON.Vector3(0,-1,0),e);t.position=new BABYLON.Vector3(0,5,-5);const n=await BABYLON.WebXRSessionManager.IsSessionSupportedAsync("immersive-ar"),s=BABYLON.GUI.AdvancedDynamicTexture.CreateFullscreenUI("FullscreenUI"),i=new BABYLON.GUI.Rectangle("rect");i.background="black",i.color="blue",i.width="80%",i.height="50%",s.addControl(i);const p=new BABYLON.GUI.StackPanel;i.addControl(p);const r=new BABYLON.GUI.TextBlock("text1");if(r.fontFamily="Helvetica",r.textWrapping=!0,r.color="white",r.fontSize="14px",r.height="400px",r.paddingLeft="10px",r.paddingRight="10px",n)r.text=`WebXR Demo: 3D Text.

Enter AR using the button on the lower right. Look around to initialize hit-test.`,p.addControl(r);else return r.text=`AR is not available on your system. Please use a supported device and browser.

Check chrome://flags for WebXR flags.`,p.addControl(r),e;const l=await e.createDefaultXRExperienceAsync({uiOptions:{sessionMode:"immersive-ar",referenceSpaceType:"local-floor",onError:B=>alert(B)},optionalFeatures:!0});l.baseExperience.sessionManager.onXRSessionInit.add(()=>{i.isVisible=!1}),l.baseExperience.sessionManager.onXRSessionEnded.add(()=>{i.isVisible=!0});const O=l.baseExperience.featuresManager.enableFeature(BABYLON.WebXRHitTest.Name,"latest");l.baseExperience.camera;const o=BABYLON.MeshBuilder.CreateTorus("marker",{diameter:.15,thickness:.05,tessellation:32},e);o.isVisible=!1,o.rotationQuaternion=new BABYLON.Quaternion;const L=new BABYLON.StandardMaterial("matstd",e);L.diffuseColor=new BABYLON.Color3(.4,.8,1),o.material=L;let c;O.onHitTestResultObservable.add(B=>{B.length?(o.isVisible=!0,c=B[0],c.transformationMatrix.decompose(void 0,o.rotationQuaternion,o.position)):(o.isVisible=!1,c=void 0)});const A=new BABYLON.DynamicTexture("DynamicTexture",{width:512,height:256},e,!1);A.drawText(d,null,140,"bold 80px Arial","white","transparent",!0);const a=BABYLON.MeshBuilder.CreatePlane("textPlane",{width:2,height:1},e),m=new BABYLON.StandardMaterial("textMat",e);m.diffuseTexture=A,m.emissiveColor=new BABYLON.Color3(1,1,1),a.material=m,a.isVisible=!1,a.rotationQuaternion=new BABYLON.Quaternion;let h=!1;return e.onPointerDown=()=>{c&&l.baseExperience.state===BABYLON.WebXRState.IN_XR&&!h&&(h=!0,a.isVisible=!0,c.transformationMatrix.decompose(void 0,a.rotationQuaternion,a.position))},e.onBeforeRenderObservable.add(()=>{o.isVisible=!h}),e};w().then(d=>{g.runRenderLoop(()=>{d.render()})});window.addEventListener("resize",()=>{g.resize()});
