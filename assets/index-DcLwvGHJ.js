(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))a(i);new MutationObserver(i=>{for(const n of i)if(n.type==="childList")for(const s of n.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&a(s)}).observe(document,{childList:!0,subtree:!0});function r(i){const n={};return i.integrity&&(n.integrity=i.integrity),i.referrerPolicy&&(n.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?n.credentials="include":i.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function a(i){if(i.ep)return;i.ep=!0;const n=r(i);fetch(i.href,n)}})();async function f(t){const e=new BABYLON.Scene(t.getEngine()),r=new BABYLON.FreeCamera("camera1",new BABYLON.Vector3(0,1,-5),e);if(r.setTarget(BABYLON.Vector3.Zero()),r.attachControl(t.getCanvas(),!0),!await(navigator.xr?.isSessionSupported?.("immersive-ar")??!1))return alert("AR not supported on this device."),e;text1.text=`WebXR Demo: Tap on the blue marker to place a red sphere.
Use the slider below to change its size before placing.`;const i=await e.createDefaultXRExperienceAsync({uiOptions:{sessionMode:"immersive-ar",referenceSpaceType:"local-floor",onError:l=>alert(l)},optionalFeatures:["hit-test"]});let n;i.baseExperience.sessionManager.onXRSessionInit.add(()=>{rectangle.isVisible=!1,n&&(n.isVisible=!0)}),i.baseExperience.sessionManager.onXRSessionEnded.add(()=>{rectangle.isVisible=!0,n&&(n.isVisible=!1),o.isVisible=!1});const p=i.baseExperience.featuresManager.enableFeature(BABYLON.WebXRHitTest.Name,"latest");i.baseExperience.camera;const o=BABYLON.MeshBuilder.CreateTorus("marker",{diameter:.15,thickness:.05,tessellation:32},e);o.isVisible=!1,o.rotationQuaternion=new BABYLON.Quaternion;const h=new BABYLON.StandardMaterial("matstd",e);h.diffuseColor=new BABYLON.Color3(.4,.8,1),o.material=h;const d=BABYLON.MeshBuilder.CreateSphere("sphere",{diameter:1},e);d.isVisible=!1,d.rotationQuaternion=new BABYLON.Quaternion,d.scaling.set(1,1,1);const m=new BABYLON.StandardMaterial("sphereMat",e);m.diffuseColor=new BABYLON.Color3(1,0,0),m.emissiveColor=new BABYLON.Color3(.2,0,0),d.material=m,n=new BABYLON.GUI.StackPanel,n.width="90%",n.isVisible=!1,n.verticalAlignment=BABYLON.GUI.Control.VERTICAL_ALIGNMENT_BOTTOM,n.horizontalAlignment=BABYLON.GUI.Control.HORIZONTAL_ALIGNMENT_CENTER,n.paddingBottom="40px",n.spacing="20px",advancedTexture.addControl(n);const g=new BABYLON.GUI.TextBlock;g.text="Sphere Size: 1.0",g.height="40px",g.fontSize="24px",g.color="white",n.addControl(g);const c=new BABYLON.GUI.Slider;c.minimum=.1,c.maximum=3,c.value=1,c.height="40px",c.width="100%",c.color="green",c.background="grey",c.thumbWidth="40px",n.addControl(c),c.onValueChangedObservable.add(l=>{g.text="Sphere Size: "+l.toFixed(2),d.isVisible&&d.scaling.set(l,l,l)});let A;return p.onHitTestResultObservable.add(l=>{l.length?(o.isVisible=!0,A=l[0],A.transformationMatrix.decompose(void 0,o.rotationQuaternion,o.position)):(o.isVisible=!1,A=void 0)}),e.onPointerDown=()=>{if(A&&o.isVisible&&i.baseExperience.state===BABYLON.WebXRState.IN_XR){d.isVisible=!0,d.position.copyFrom(o.position),d.rotationQuaternion.copyFrom(o.rotationQuaternion);const l=c.value;d.scaling.set(l,l,l)}},e.onBeforeRenderObservable.add(()=>{o.isVisible=!0}),e}function L(t=""){var e=new BABYLON.GUI.Rectangle;return e.background="white",e.cornerRadius=20,e.alpha=.5,e.isPointerBlocker=!0,e.thickness=0,e}let R=class extends BABYLON.Mesh{#e;#t;constructor(e,r=L()){super(e);var a=new BABYLON.MeshBuilder.CreatePlane("",{height:.17,width:.2});this.#t=r,this.#e=BABYLON.GUI.AdvancedDynamicTexture.CreateForMesh(a),this.clone(a),this.#e.isBlocking=!0,this.#e.addControl(this.#t)}getDynamicTexture(){return this.#e}};class O extends BABYLON.GUI.Button{#e;#t;#n;constructor(e){super(e,e),this.#n=new BABYLON.GUI.TextBlock,this.#n.text=e,this.addControl(this.#n),this.heightInPixels=.1*window.screen.height,this.verticalAlignment=BABYLON.GUI.Control.VERTICAL_ALIGNMENT_BOTTOM,this.thickness=0,this.#e="transparent",this.#t="white",this.cornerRadius=20,this.alpha=.32,this.background=this.#e,this.onPointerOutObservable.add(()=>{this.background=this.#e}),this.onPointerEnterObservable.add(()=>{this.background=this.#t})}changeText(e){this.#n.text=e}}class u{constructor(e,r){this.pageFunction=e,this.name=r}}class N extends BABYLON.GUI.Rectangle{constructor(e,r,a){super(e),this.pages=r,this.gameEngine=a,this.name="name",this.currentPage=-1,this.thickness=0,this.cornerRadius=20,this.alpha=.32;var i=L();i.height=.08,i.verticalAlignment=BABYLON.GUI.Control.VERTICAL_ALIGNMENT_TOP;var n=new O("header","click to move");n.onPointerDownObservable.add(()=>{}),i.addControl(n),this.buttonContainer=L(),this.buttonContainer.width=.3,this.buttonContainer.horizontalAlignment=BABYLON.GUI.Control.HORIZONTAL_ALIGNMENT_LEFT,this.buttonContainer.height=.8,this.contentContainer=L(),this.contentContainer.width=.68,this.contentContainer.horizontalAlignment=BABYLON.GUI.Control.HORIZONTAL_ALIGNMENT_RIGHT,this.contentContainer.height=.8;var s=new BABYLON.GUI.StackPanel("MenuStack");for(let h=0;h<this.pages.length;h++){var p=new O(this.pages[h].name,this.pages[h].name);p.heightInPixels=90,p.onPointerUpObservable.add(()=>{this.navigation(0)}),s.addControl(p)}var o=new BABYLON.GUI.Grid("Grid");o.addControl(s),this.buttonContainer.addControl(o),this.addControl(i),this.addControl(this.buttonContainer),this.addControl(this.contentContainer)}navigation(e){this.currentPage!=e&&(this.currentPage=e,this.contentContainer.addControl(this.pages[e].pageFunction(this.gameEngine)))}}function B(t){var e=new BABYLON.GUI.StackPanel("MenuStack"),r=new BABYLON.GUI.Grid("Grid"),a=new O("test");a.onPointerUpObservable.add(function(){t.loadScene(f(t))});var i=new O("Bhabisya");i.onPointerUpObservable.add(function(){t.loadScene(f(t))});var n=new O("Adib");return e.addControl(a),e.addControl(i),e.addControl(n),r.addControl(e),r}class w{constructor(e,r){this.buttonFuncion=e,this.name=r}}function v(t,e){var r=new BABYLON.GUI.HolographicSlate("Menu");e.addControl(r),r.minDimensions=new BABYLON.Vector2(5,5),r.dimensions=new BABYLON.Vector2(5,5),r.content=new N("tester",[new u(B,"Experiments Tab"),new u(B,"Experiments Tab"),new u(B,"Experiments Tab")],t)}function Y(t,e){}function x(t,e){}function S(t,e){}function I(t,e){}function T(t,e){t.rows=t.buttons.length/2;for(let a=0;a<t.buttons.length;a++){var r=new BABYLON.GUI.TouchHolographicButton;r.text=t.buttons[a].name,r.onPointerUpObservable.add(()=>{t.buttons[a].buttonFuncion(e,t.getParent())}),t.addButton(r)}return t}class E extends BABYLON.GUI.NearMenu{constructor(e,r,a=[new w(v,"Main Menu"),new w(Y,"Selection"),new w(x,"Video Toggle"),new w(S,"Chat"),new w(I,"Instruction List")]){super(e),this.gameEngine=r,this.name=e,this.buttons=a,this.rows=a.length/2}getParent(){return this.parent}}async function G(t){const e=new BABYLON.Scene(t.getEngine()),r=new BABYLON.GUI.GUI3DManager(e);e.clearColor=new BABYLON.Color3(.3,.3,.3);const a=new BABYLON.FlyCamera("camera1",new BABYLON.Vector3(0,1,-5),e);return a.minZ=.01,new BABYLON.HemisphericLight("hemi",new BABYLON.Vector3(0,0,0),e),e.createDefaultXRExperienceAsync({uiOptions:{sessionMode:"immersive-ar",referenceSpaceType:"local-floor"}}).then(i=>{i.baseExperience.camera.position=new BABYLON.Vector3(0,0,-.3);try{i.baseExperience.featuresManager.enableFeature(BABYLON.WebXRFeature.HAND_TRACKING,"latest",{xrInput:i.input})}catch{console.log("")}var n=new BABYLON.StandardMaterial;n.backFaceCulling=!0;const s=new BABYLON.MeshBuilder.CreatePlane("",{height:4,width:5});var p=new BABYLON.UtilityLayerRenderer(e);p.utilityLayerScene.autoClearDepthAndStencil=!1;var o=new BABYLON.GUI.SlateGizmo(p);o.attachedMesh=s,o.fixedScreenSizeDistanceFactor=.2;var h=new BABYLON.SixDofDragBehavior,d=new BABYLON.MultiPointerScaleBehavior;new BABYLON.PointerDragBehavior({dragAxis:new BABYLON.Vector3(0,1,0)}),s.addBehavior(h),s.addBehavior(d),s.position=new BABYLON.Vector3(.2,0,0),n.alpha=0,n.diffuseColor=new BABYLON.Color3(.9,.3,.9),s.material=n;var m=BABYLON.GUI.AdvancedDynamicTexture.CreateForMesh(s);m.isBlocking=!0,m.addControl(new N("tester",[new u(B,"Experiments Tab"),new u(B,"Done Tab"),new u(B,"Experiments Tab")],t));var g=new AriaWindow("bamne",new N("tester",[new u(B,"Experiments Tab"),new u(B,"Done Tab"),new u(B,"Experiments Tab")],t));g.position=new BABYLON.Vector3(1,5,0),r.useRealisticScaling=!0;var c=new E("one",t);r.addControl(c),T(c,t),s.getClassName()}),e}const C=document.getElementById("renderCanvas");if(!C)throw new Error("Canvas with id 'renderCanvas' not found.");class M{#e;#t;constructor(e){this.#e=e,this.#t=new BABYLON.Engine(this.#e,!0),this.currentScne=null}#n(e){e.then(r=>{r&&this.#t.runRenderLoop(()=>{r.render()})}),window.addEventListener("resize",()=>{this.#t.resize()})}renderUpdate(){this.currentScne.render()}loadScene(e){this.currentScne=e,this.#t.stopRenderLoop(),this.#n(e)}getEngine(){return this.#t}getCanvas(){return this.#e}}const b=new M(C);function y(){var t=G(b);b.loadScene(t)}function P(){y()}P();
