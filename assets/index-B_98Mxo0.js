(function(){const o=document.createElement("link").relList;if(o&&o.supports&&o.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver(e=>{for(const n of e)if(n.type==="childList")for(const l of n.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&t(l)}).observe(document,{childList:!0,subtree:!0});function p(e){const n={};return e.integrity&&(n.integrity=e.integrity),e.referrerPolicy&&(n.referrerPolicy=e.referrerPolicy),e.crossOrigin==="use-credentials"?n.credentials="include":e.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function t(e){if(e.ep)return;e.ep=!0;const n=p(e);fetch(e.href,n)}})();const g=document.getElementById("renderCanvas");if(!g)throw new Error("Canvas with id 'renderCanvas' not found.");const h=new BABYLON.Engine(g,!0);function N(u){u.then(o=>{o&&h.runRenderLoop(()=>{o.render()})}),window.addEventListener("resize",()=>{h.resize()})}async function Y(u,o){const p="Hello AR World",t=new BABYLON.Scene(o),e=new BABYLON.FreeCamera("camera1",new BABYLON.Vector3(0,1,-5),t);e.setTarget(BABYLON.Vector3.Zero()),e.attachControl(u,!0);const n=new BABYLON.HemisphericLight("light",new BABYLON.Vector3(0,1,0),t);n.intensity=1;const l=new BABYLON.DirectionalLight("dirlight",new BABYLON.Vector3(0,-1,0),t);l.position=new BABYLON.Vector3(0,5,-5);const w=await(navigator.xr&&BABYLON.WebXRSessionManager.IsSessionSupportedAsync("immersive-ar")),O=BABYLON.GUI.AdvancedDynamicTexture.CreateFullscreenUI("FullscreenUI"),a=new BABYLON.GUI.Rectangle("rect");a.background="black",a.color="blue",a.width="80%",a.height="50%",O.addControl(a);const b=new BABYLON.GUI.StackPanel;a.addControl(b);const r=new BABYLON.GUI.TextBlock("text1");if(r.fontFamily="Helvetica",r.textWrapping=!0,r.color="white",r.fontSize="14px",r.height="400px",r.paddingLeft="10px",r.paddingRight="10px",b.addControl(r),!w)return r.text=`AR is not available on your system. Please use a supported device and browser.

Check chrome://flags for WebXR flags.`,t;r.text=`WebXR Demo: 3D Text.

Enter AR using the button on the lower right. Look around to initialize hit-test.`;const c=await t.createDefaultXRExperienceAsync({uiOptions:{sessionMode:"immersive-ar",referenceSpaceType:"local-floor",onError:B=>alert(B)},optionalFeatures:["hit-test"]});c.baseExperience.sessionManager.onXRSessionInit.add(()=>{a.isVisible=!1}),c.baseExperience.sessionManager.onXRSessionEnded.add(()=>{a.isVisible=!0,i.isVisible=!1,s.isVisible=!1,f=!1});const x=c.baseExperience.featuresManager.enableFeature(BABYLON.WebXRHitTest.Name,"latest");c.baseExperience.camera;const i=BABYLON.MeshBuilder.CreateTorus("marker",{diameter:.15,thickness:.05,tessellation:32},t);i.isVisible=!1,i.rotationQuaternion=new BABYLON.Quaternion;const L=new BABYLON.StandardMaterial("matstd",t);L.diffuseColor=new BABYLON.Color3(.4,.8,1),i.material=L;let d;x.onHitTestResultObservable.add(B=>{B.length?(i.isVisible=!0,d=B[0],d.transformationMatrix.decompose(void 0,i.rotationQuaternion,i.position)):(i.isVisible=!1,d=void 0)});const A=new BABYLON.DynamicTexture("DynamicTexture",{width:512,height:256},t,!1);A.drawText(p,null,140,"bold 80px Arial","white","transparent",!0);const s=BABYLON.MeshBuilder.CreatePlane("textPlane",{width:2,height:1},t),m=new BABYLON.StandardMaterial("textMat",t);m.diffuseTexture=A,m.emissiveColor=new BABYLON.Color3(1,1,1),s.material=m,s.isVisible=!1,s.rotationQuaternion=new BABYLON.Quaternion;let f=!1;return t.onPointerDown=()=>{d&&c.baseExperience.state===BABYLON.WebXRState.IN_XR&&!f&&(f=!0,s.isVisible=!0,d.transformationMatrix.decompose(void 0,s.rotationQuaternion,s.position))},t.onBeforeRenderObservable.add(()=>{i.isVisible=!f}),t}var y=Y(g,h);function v(){N(y)}v();
